# 实验要求

本实验的目的是实现一个 TCP 网络栈，单人完成。

实验分数由两部分组成，一部分是必选功能共 80 分，一部分是限选功能共 20 分。

各项功能见下表，其中打 `*` 号的为必选功能，其余为限选功能。同学们需要实现所有的必选功能，并在剩余的限选功能中选择若干功能使得这部分分数累计达到或超过 40 分。

部分自选功能依赖必选功能的实现。你可以放弃实现一部分必选功能，但扣除的必选部分分数不会由溢出的自选功能分数弥补。

评分方法：

1. 必选部分（80分）：`sum(scores)`
2. 自选部分（20分）：`min(sum(scores),20)`

在实验报告中，对于所实现的每个功能，请编写一个章节，包括下列事情：

1. 标注这是属于下面哪个类别里的哪一项功能
2. 为了实现这个功能，做了哪些代码改动
3. 可以展示功能的 Wireshark 截图展示或者命令行输出

在选择实现的自选功能的时候，请研究一下如何实现和触发该功能。有的功能可能容易实现，但是不容易触发。另外，请注意，部分功能由 lwip 支持，可以在 `lwipopts.h` 中打开；如果有不支持的功能，可能需要自己实现客户端+服务端，难度较大。为了展示实现的客户端功能，可以用自己的协议栈或者 lwip 作为服务端进行测试；同样地，为了展示实现的服务端功能，可以用自己的协议栈或者 lwip 作为客户端进行测试。

## 必选功能（总分 80 分）

### Step 1. TCP 序列号的对比与生成

- 分数：10
- 参考文档：RFC 793 Section 3.3 和 Page 27
- 需要通过测试 1 和 2

### Step 2. TCP 三次握手连接的建立

- 分数：10
- 参考文档：RFC 793 Figure 7
- 需要通过测试 3a 和 3b

### Step 3. 简易的发送和接收逻辑

- 分数：10
- 参考文档：RFC 793
- 需要通过测试 4a 和 4b

### Step 4. TCP 连接的终止

- 分数：10
- 参考文档：RFC 793
- 需要通过测试 xx

### Step 5. 访问百度主页

- 分数：10
- 需要通过测试 5

### Step 6. 重传和乱序重排

- 分数：10
- 需要通过测试 xx

### Step 7. 实现 Nagle 算法

- 分数：10
- 需要通过测试 xx

### Step 8. 实现慢启动和冲突避免

- 分数：10
- 需要通过测试 xx

## 限选功能（总分 20 分）

### 实现 TCP New Reno 拥塞控制算法

- 分数：20

### 实现 TCP CUBIC 拥塞控制算法

- 分数：20

### 实现 TCP BBR 拥塞控制算法

- 分数：20

### 实现 SACK

- 分数：20

### 实现 Windows Scaling

- 分数：5

### 实现 TCP Timestamps

- 分数：5
